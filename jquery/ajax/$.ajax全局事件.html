<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>ajax全局事件</title>
	<script src="../jquery-1.7.2.js"></script>
	<link rel="stylesheet" href="../bootstrap.min.css" />
	<style>
	.loading{display: none;}
	</style>
</head>
<body>
	<form action="" class="form">
	<div class="form-group">
	<label for="">用户名：</label>
	<input type="text" class="form-control" name="name" />
	</div>
	<div class="form-group">
	<label for="">邮箱：</label>
	<input type="text" class="form-control" name="email" />
	</div>
	<div class="form-group">
	<label for="">内容：</label>
	<textarea  id="" class="form-control" name="msg" cols="10" rows="5"></textarea>
	</div>
	<button type="button" class="btn btn-primary">提交</button>
	</form>
	<div class="loading">正在加载中</div>
	<div id="div"></div>
	<script>
		$(function(){
			$(".btn").click(function(){
				// $.ajax({
				// 	type:"POST",
				// 	url:"http://www.google.com",
				// 	data:$("form").serialize(),
				// 	timeout:500,//请求超时时间
				// 	global:true,//是否触发全局ajax事件，默认为true
				// 	dataType:"json",//服务器返回的数据类型
				// 	beforeSend:function(){
				// 		//发送请求前的回调函数
				// 	},
				// 	success:function(data,status,xhr){
				// 		$("#div").html(data);
				// 	},
				// 	error:function(xhr,errorText,errorType){
				// 		//请求失败时的回调函数
				// 		alert("请求错误")
				// 	},
				// 	complete:function(){
				// 		//请求完成时的回调函数
				// 	}
					

				// });

				// 老版本的用法
				// $(".loading").ajaxStart(function(){
				// 	$(this).show()
				// }).ajaxStop(function(){
				// 	$(this).hide()
				// })
				//jquery1.8以后的用法 
				// $(document).ajaxStart(function(){
				// 	$(".loading").show();
				// }).ajaxStop(function(){
				// 	$(".loading").hide()
				// });
				
				$.post("post2.php").success(function(){
					alert("请求成功后执行");
				}).error(function(){
					alert("请求失败后执行");
				}).complete(function(){
					alert("请求完成后执行，不管成功或失败");
				});

				

			})

			// 请求全局事件，除了ajaxSend()全局方法，其他的ajaxSuccess()对应局部方法success(),ajaxError()对应error,ajaxComplete对应complete
				$(document).ajaxSend(function(){
					alert("发送请求之前执行");
				}).ajaxComplete(function(){
					alert("请求完成后执行，不管成功或失败");
				}).ajaxSuccess(function(){
					alert("请求成功后执行");
				}).ajaxError(function(){
					alert("请求失败后执行");
				})
		})
	</script>
</body>
</html>